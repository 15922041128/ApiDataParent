<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.pbccrc.api.core.mapper.ApiLogMapper">

	<resultMap type="org.pbccrc.api.base.bean.ApiLog" id="apiLog">
		<id property="id" column="id" />
		<result property="userID" column="userID" />
		<result property="uuid" column="uuid" />
		<result property="localApiID" column="localApiID" />
		<result property="params" column="params" />
		<result property="dataFrom" column="dataFrom" />
		<result property="isSuccess" column="isSuccess" />
		<result property="queryDate" column="queryDate" />
	</resultMap>
	
	<insert id="addLog" parameterType="org.pbccrc.api.base.bean.ApiLog">
		insert into apiLog(userID, uuid, localApiID, params, dataFrom, isSuccess, queryDate) 
			values(#{userID}, #{uuid}, #{localApiID}, #{params}, #{dataFrom}, #{isSuccess}, #{queryDate})
	</insert>
	
	<select id="queryLog" parameterType="org.pbccrc.api.base.bean.ApiLog" resultMap="apiLog">
		select * from apiLog
		<where>
			<if test="userID != null">
				and userID = #{userID}
			</if>
			<if test="localApiID != null">
				and localApiID = #{localApiID}
			</if>
			<if test="startDate != null">
				<![CDATA[
					and queryDate >= #{startDate}  
				]]>
			</if>
			<if test="endDate != null">
				<![CDATA[
					and queryDate <= #{endDate}  
				]]>
			</if>
		</where>
	</select>
	
	
</mapper>