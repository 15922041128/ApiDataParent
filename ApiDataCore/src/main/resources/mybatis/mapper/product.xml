<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.pbccrc.api.core.mapper.ProductMapper">
	
	<select id="queryAll" resultType="java.util.HashMap">
		select * from product
	</select>
	
	<select id="getProductByType" parameterType="java.lang.String" resultType="org.pbccrc.api.base.bean.Product">
		select * from product where type = #{productType}
	</select>
	
	<select id="queryProductByPage" parameterType="org.pbccrc.api.base.bean.Product" resultType="org.pbccrc.api.base.bean.Product">
		select * from product where 1=1
			<if test="name !=null and name != '' ">
            	and name like CONCAT('%',#{name},'%') 
        	</if>
			<if test="type !=null and type != '' ">
            	and service = #{type}
        	</if>
        	<if test="status !=null and status != '' ">
            	and isOpen = #{status}
        	</if>
	</select>
	
	<insert id="addProduct" useGeneratedKeys="true" keyProperty="ID" parameterType="org.pbccrc.api.base.bean.Product">
		insert into Product(name, image, type, price, apis, status) 
			values(#{name}, #{image}, #{type}, #{price}, #{apis}, #{status})
	</insert>
	
	<update id="updateProduct" parameterType="org.pbccrc.api.base.bean.Product">
		update Product
		<set>  
			<if test="name !=null and name != '' ">
            	name = #{name},
        	</if>
        	<if test="image !=null and image != '' ">
            	image = #{image},
        	</if>
        	<if test="type !=null and type != '' ">
            	type = #{type},
        	</if>
        	<if test="price !=null and price != '' ">
            	contactName = #{contactName},
        	</if>
        	<if test="apis !=null and apis != '' ">
            	apis = #{apis},
        	</if>
        	<if test="status !=null and status != '' ">
            	status = #{status},
        	</if>
        </set>
        <where>
			ID = #{ID}
		</where>	
		
	</update>
	
</mapper>