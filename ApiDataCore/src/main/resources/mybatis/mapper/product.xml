<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.pbccrc.api.core.mapper.ProductMapper">
	
	<select id="queryAll" resultType="org.pbccrc.api.base.bean.Product">
		select * from product
	</select>
	
	<select id="getProductByType" parameterType="org.pbccrc.api.base.bean.Product" resultType="org.pbccrc.api.base.bean.Product">
		select * from product where type = #{type} 
		<if test="isShow !=null and isShow != '' ">
           and isShow = #{isShow}
        </if>
        <if test="status !=null and status != '' ">
           and status = #{status}
        </if>
	</select>
	
	<select id="queryProductByPage" parameterType="org.pbccrc.api.base.bean.Product" resultType="org.pbccrc.api.base.bean.Product">
		select * from product where 1=1
			<if test="name !=null and name != '' ">
            	and name like '%'||#{name}||'%' 
        	</if>
			<if test="type !=null and type != '' ">
            	and service = #{type}
        	</if>
        	<if test="status !=null and status != '' ">
            	and status = #{status}
        	</if>
	</select>
	
	<insert id="addProduct" useGeneratedKeys="true" keyProperty="id" parameterType="org.pbccrc.api.base.bean.Product">
		insert into Product(id, name, image, type, price, apis, status, initCount, initNote, isShow) 
			values(seq_product.nextval, #{name}, #{image}, #{type}, #{price}, #{apis}, #{status}, #{initCount}, #{initNote}, #{isShow})
	</insert>
	
	<update id="updateProduct" parameterType="org.pbccrc.api.base.bean.Product">
		update Product
		<set>  
			<if test="name !=null and name != '' ">
            	name = #{name},
        	</if>
        	<if test="image !=null and image != '' ">
            	image = #{image},
        	</if>
        	<if test="type !=null and type != '' ">
            	type = #{type},
        	</if>
        	<if test="price !=null and price != '' ">
            	price = #{price},
        	</if>
        	<if test="apis !=null and apis != '' ">
            	apis = #{apis},
        	</if>
        	<if test="status !=null and status != '' ">
            	status = #{status},
        	</if>
        	<if test="status !=null and status != '' ">
            	initCount = #{initCount},
        	</if>
        	<if test="status !=null and status != '' ">
            	initNote = #{initNote},
        	</if>
        	<if test="status !=null and status != '' ">
            	isShow = #{isShow},
        	</if>
        </set>
        <where>
			id = #{id}
		</where>	
		
	</update>
	
</mapper>
